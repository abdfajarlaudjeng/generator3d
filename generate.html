<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generator Angka 2D • 3D • 4D</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-md">
    <h1 class="text-2xl font-bold mb-4 text-center">Generator Angka 2D • 3D • 4D</h1>

    <!-- Pilihan Tipe -->
    <div class="mb-4">
      <label class="font-semibold">Pilih Tipe:</label>
      <select id="tipe" class="border p-2 rounded w-full">
        <option value="2D">2D</option>
        <option value="3D">3D</option>
        <option value="4D">4D</option>
      </select>
    </div>

    <!-- Input BBFS -->
    <div class="mb-4">
      <label class="font-semibold">Masukkan BBFS:</label>
      <input id="bbfs" type="text" class="border p-2 rounded w-full" placeholder="contoh: 34056789">
    </div>

    <!-- Tombol Generate -->
    <button onclick="generate()" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700">Generate</button>

    <!-- Filter Posisi -->
    <div id="filterBox" class="mt-6 hidden">
      <h2 class="text-lg font-semibold mb-2">Filter Posisi</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
        <input id="filterAs" type="text" maxlength="1" placeholder="AS" class="border p-2 rounded">
        <input id="filterKop" type="text" maxlength="1" placeholder="KOP" class="border p-2 rounded">
        <input id="filterKepala" type="text" maxlength="1" placeholder="KEPALA" class="border p-2 rounded">
        <input id="filterEkor" type="text" maxlength="1" placeholder="EKOR" class="border p-2 rounded">
      </div>
      <button onclick="applyFilter()" class="mt-3 bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700">Terapkan Filter</button>
    </div>

    <!-- Hasil -->
    <div class="mt-6">
      <h2 class="text-lg font-semibold">Hasil:</h2>
      <div id="hasil" class="mt-2 p-3 border rounded bg-gray-50 max-h-96 overflow-y-auto text-sm"></div>
    </div>
  </div>

  <script>
    let allResults = [];

    function generate() {
      const tipe = document.getElementById("tipe").value;
      const bbfs = document.getElementById("bbfs").value.replace(/\D/g, ""); // hanya angka
      let hasil = new Set();

      if (!bbfs || bbfs.length < parseInt(tipe)) {
        alert("Masukkan BBFS yang valid!");
        return;
      }

      // Buat kombinasi angka unik
      function combine(arr, len, prefix = "") {
        if (prefix.length === len) {
          hasil.add(prefix);
          return;
        }
        for (let i = 0; i < arr.length; i++) {
          combine(arr, len, prefix + arr[i]);
        }
      }

      combine(bbfs.split(""), parseInt(tipe));
      allResults = Array.from(hasil);
      document.getElementById("filterBox").classList.remove("hidden");
      showResults(allResults);
    }

    function applyFilter() {
      let filtered = allResults;
      const as = document.getElementById("filterAs").value;
      const kop = document.getElementById("filterKop").value;
      const kepala = document.getElementById("filterKepala").value;
      const ekor = document.getElementById("filterEkor").value;

      filtered = filtered.filter(num => {
        if (as && num[0] !== as) return false;
        if (kop && num[1] !== kop) return false;
        if (kepala && num[num.length - 2] !== kepala) return false;
        if (ekor && num[num.length - 1] !== ekor) return false;
        return true;
      });

      showResults(filtered);
    }

    function showResults(list) {
      document.getElementById("hasil").innerHTML = list.join(" • ");
    }
  </script>
</body>
</html>
